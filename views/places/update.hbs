{{#with place}}
<h1>You are updating {{name}} place</h1>

  <form action="" method="POST" enctype="multipart/form-data">

<div>
<img class="img-list" src="{{pictureUrl}}">

  <div>
  <label for="picture-input">Update Picture:</label><br>
  <input id="picture-input" name="picture" type="file"/>
</div>

</div>

<label for="name">Name:</label>
<input type="text" name="name" id="name" value="{{name}}" required>

<label for="description-input">Description:</label>
<textarea required id="description-input" name="description">{{ description }}></textarea>

<label for="latitude-input">Latitude</label>
<input required id="latitude-input" type="text" name="latitude" value="{{location.coordinates.[0]}}">

<label for="longitude-input">Longitude</label>
<input required id="longitude-input" type="text" name="longitude" value="{{location.coordinates.[1]}}">

<div id="map-container"></div>


<button>Update art place</button>
</form>

<script>

 const $inputLatitude = document.getElementById('latitude-input');
 const $inputLongitude = document.getElementById('longitude-input');

const longitude = {{location.coordinates.[0]}};
const latitude = {{location.coordinates.[1]}};

function initMap() {
  const mapcoord = {lat: latitude, lng: longitude};
  
  const map = new window.google.maps.Map(document.getElementById('map-container'), {zoom: 10, center: mapcoord});
  let marker = new google.maps.Marker({position: mapcoord, map: map});

map.addListener('click', event => {
      const latitude = event.latLng.lat();
      const longitude = event.latLng.lng();
      $inputLatitude.value = Number(latitude);
      $inputLongitude.value = Number(longitude);
      
      if (marker) {
        marker.setMap(null);
      }
      marker = new window.google.maps.Marker({
        map,
        position: {
          lat: latitude,
          lng: longitude
        }
      });
      
    })
}
</script>

{{>mapscript}}
{{/with}}
